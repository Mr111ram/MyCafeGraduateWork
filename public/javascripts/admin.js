"use strict";$(document).ready(function(){function t(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0;e?($("#".concat(t," .alert-submit")).attr("style","display: none;"),$("#".concat(t," .alert-error")).attr("style","display: block;").html("<h3>Error!</h3><p>".concat(e,"</p>")),setTimeout(function(){$("#".concat(t," .alert-error")).attr("style","display: none;")},5e3)):($("#".concat(t," .alert-submit")).attr("style","display: block;"),$("#".concat(t," .alert-error")).attr("style","display: none;"),setTimeout(function(){$("#".concat(t," .alert-submit")).attr("style","display: none;")},5e3))}$("#halls .nav-link").on("shown.bs.tab",function(){var t=Number($(this).attr("id").split("-")[1]);if(!$("#hall-".concat(t," .editor__html .CodeMirror")).get(0)){var e=CodeMirror($("#hall-".concat(t," .editor__html")).get(0),{value:$("#hall-".concat(t," .hallBody")).html().trim(),mode:"text/paint",lineNumbers:!0,lineWrapping:!0,theme:"darcula"});$("#hall-".concat(t," .CodeMirror")).height($("#hall-".concat(t," .editor__visual")).height()+25).on("keyup",function(){var t=e.doc.getValue();$(".tab-pane.active .hallBody").html(t)}),$("#hall-".concat(t," .hallBody")).on("input",function(){var t=$(this).html();e.doc.setValue(t)})}}),$("#tab-0").tab("show"),$("#hallsContent .hall__submit").on("click",function(){var e=Number($("#hallsContent .tab-pane.active").attr("id").split("-")[1])+1,a=$("#hallsContent .tab-pane.active .info__title").text(),n=$("#hallsContent .tab-pane.active .hallBody").html(),l=$("#hallsContent .tab-pane.active .info__old-price").text(),i=$("#hallsContent .tab-pane.active .info__new-price").text(),o=new XMLHttpRequest,c="id=".concat(e,"&title=").concat(a,"&body=").concat(n,"&old=").concat(l,"&new=").concat(i);try{o.open("POST","/admin/hall/",!0),o.setRequestHeader("Content-type","application/x-www-form-urlencoded"),o.addEventListener("readystatechange",function(){4===o.readyState&&200===o.status&&console.log(o.responseText)}),o.send(c),t("hallsContent")}catch(e){t("hallsContent",e)}}),$("#dishes .hall__submit").on("click",function(){var e=$(".dishes__container .dish__item"),a=new XMLHttpRequest,n=[];e.each(function(){var t=$(this).attr("data-dish-id").replace(/'/gi,"").replace(/"/gi,"").replace(/`/gi,"").replace(/&/gi,""),e=$(this).find(".dish__title").text().replace(/'/gi,"").replace(/"/gi,"").replace(/`/gi,"").replace(/&/gi,""),a=$(this).find(".dish__subtitle").text().replace(/'/gi,"").replace(/"/gi,"").replace(/`/gi,"").replace(/&/gi,"");n.push("id='".concat(parseInt(t)+1,"'")),n.push("title='".concat(e,"'")),n.push("price='".concat(a,"'"))}),n=n.join("&");try{a.open("POST","/admin/dishes/",!0),a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a.addEventListener("readystatechange",function(){4===a.readyState&&200===a.status&&console.log(a.responseText)}),a.send(n),t("dishes")}catch(e){t("dishes",e)}})});